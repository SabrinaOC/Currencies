<div style="margin-top: 30px; display: flex; justify-content: space-between;" *ngIf="subscriptions?.length > 0">
  <div style="margin-top: auto">
    <h1>Currencies</h1>
  </div>
  <div style="margin-top: 30px; display: flex; justify-content: end;">
    <mat-form-field appearance="fill">
    <mat-label>Choose one</mat-label>
    <mat-select (selectionChange)="currencyChanged($event)">
      <mat-option *ngFor="let divisa of divisas" [value]="divisa.code">{{divisa.name}}</mat-option>
    </mat-select>
   <!-- <mat-hint>Errors appear instantly!</mat-hint>
    <mat-error *ngIf="selected.hasError('required')">You must make a selection</mat-error>
    <mat-error *ngIf="selected.hasError('pattern') && !selected.hasError('required')">
      Your selection is invalid
    </mat-error>-->
  </mat-form-field>
  <button mat-raised-button  style="height : 54px; margin-left: 15px; background-color: rgb(13, 4, 139); color: white" (click)="addNewCurrency()">Subscribe</button>
  </div>
  
</div>
<mat-card class="main-card" *ngFor="let subs of subscriptions">
  <mat-card-header>
    <mat-card-title>{{subs._code}} / EUR</mat-card-title>
    <mat-card-subtitle>Following</mat-card-subtitle>
    <div style="display: flex; margin-left:auto">
      <img src="../../../../../assets/images/flags/{{subs._code}}.png" style="width: 38px; height: 38px; margin-right: 15px;">
      <mat-icon aria-hidden="false" fontIcon="arrow_right" style="margin-top: 8px; margin-right: 15px;"></mat-icon>
      <img src="../../../../../assets/images/flags/EUR.png" style="width: 38px; height: 38px;">
    </div>
  </mat-card-header>
  <mat-card-content>
    <div style="display: flex; justify-content: space-between; margin-inline: 19px;">
      <!-- 1st card to show current val->
      <mat-card>
        <mat-card-header>
          <mat-card-title>Real time </mat-card-title>
          <mat-card-subtitle>Current exchange {{ subs.forex?._exchangeRate }}</mat-card-subtitle>
          <mat-card-subtitle>Bid price {{ subs.forex?._bidPrice }}</mat-card-subtitle>
          <mat-card-subtitle>Ask price {{ subs.forex?._askPrice }}</mat-card-subtitle>
          <mat-card-subtitle>Last updated {{ subs.forex?._createdAt || date }}</mat-card-subtitle>
        </mat-card-header>
      </mat-card>
      <!-- end 1st card to show current val->

      <!-- 1st card to show current val->
      <mat-card>
        <mat-card-header>
          <mat-card-title>Market closing price yesterday </mat-card-title>
          <mat-card-subtitle>Current exchange {{ subs.forex?._exchangeRate }}</mat-card-subtitle>
          <mat-card-subtitle>Bid price {{ subs.forex?._bidPrice }}</mat-card-subtitle>
          <mat-card-subtitle>Ask price {{ subs.forex?._askPrice }}</mat-card-subtitle>
          <mat-card-subtitle>Last updated {{ subs.forex?._createdAt || date }}</mat-card-subtitle>
        </mat-card-header>
      </mat-card>
      <!-- end 1st card to show current val-->
      <div class="currency-values-box">
          <mat-card-title>Real time </mat-card-title>
          <mat-card-subtitle>Exchange rate {{ subs.currentForex?._exchangeRate }}</mat-card-subtitle>
          <mat-card-subtitle>Bid price {{ subs.currentForex?._bidPrice }}</mat-card-subtitle>
          <mat-card-subtitle>Ask price {{ subs.currentForex?._askPrice }}</mat-card-subtitle>
          <mat-card-subtitle>Last updated {{ subs.currentForex?._createdAt || date }}</mat-card-subtitle>
      </div>
      <!-- end 1st card to show current val-->
      <div class="currency-values-box">
        <mat-card-title>Market closing price yesterday</mat-card-title>
        <mat-card-subtitle>Exchange rate {{ subs.historyForex?._exchangeRate != null ? subs.historyForex?._exchangeRate : 'No data registered'}}</mat-card-subtitle>
        <mat-card-subtitle>Bid price {{ subs.historyForex?._bidPrice  != null ? subs.historyForex?._bidPrice : 'No data registered'}}</mat-card-subtitle>
        <mat-card-subtitle>Ask price {{ subs.historyForex?._askPrice  != null ? subs.historyForex?._askPrice : 'No data registered'}}</mat-card-subtitle>
        <mat-card-subtitle>Last updated {{ subs.historyForex?._createdAt  != null ? (subs.historyForex?._createdAt || date) : 'No data registered' }}</mat-card-subtitle>
    </div>
    </div>
  </mat-card-content>
  <mat-card-actions style="display: flex; justify-content: end;">
    <button mat-raised-button style="width: 100%; margin-inline: 20px; background-color: rgb(150, 2, 2); color: white" (click)="removeCurrency(subs._code)">STOP FOLLOWING</button>
  </mat-card-actions>
  <mat-card-footer>
  </mat-card-footer>
</mat-card>
<mat-divider></mat-divider>
<!-- VIEW SHOWN WHEN NO CURRENCY FOLLOWED -->
<ng-container *ngIf="subscriptions?.length === 0">
  <div style="display: flex; justify-content: center; margin-top: 25px;">
    <h1 matTooltip="Click on a card to start following">Subscribe to your first currency</h1>
  </div>
  <div class="first-select">
      <mat-card class="fresh-currency-card" *ngFor="let d of divisas" (click)="addNewCurrency(d.code)">
        <mat-card-header>
          <img mat-card-avatar src="../../../../../assets/images/flags/{{d.code}}.png" alt="{{d.name}}">
          <mat-card-title>{{d.code}}</mat-card-title>
          <mat-card-subtitle>{{d.name}}</mat-card-subtitle>
        </mat-card-header>
      </mat-card>
  </div>
</ng-container>

